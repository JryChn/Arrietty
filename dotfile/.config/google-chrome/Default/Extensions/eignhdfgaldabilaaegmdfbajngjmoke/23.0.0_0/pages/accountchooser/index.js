"use strict";cjce.registerTemplate("bm-p-accountchooser",function(c,l){var t,d=!l.standaloneService||l.servicesDatabase[l.standaloneService].brandAccount;function r(e,c){var a=cjce.createElement("cjmd-item");c||a.classList.add("bm-p-accountchooser-item--large"),a.addEventListener("click",function(){e.validSession?cjgApis.session.changeAccount(e):cjgApis.account.signin(e)});var t=c?32:40,n=Math.ceil(t*window.devicePixelRatio),o=cjce.createElement("cjmd-icon",{circle:!0,size:t,url:e.photoUrl+"?sz="+n,backupUrl:"/images/avatar.svg"});c&&o.classList.add("bm-p-accountchooser-item__compacticon"),a.appendChild(o);var i=document.createElement("div");i.className="cjmd-item__body";var s,d,l=document.createElement("div");return l.className="cjmd-item__header",l.textContent=e.displayName,i.appendChild(l),c||((s=document.createElement("div")).className="cjmd-secondarytext",s.textContent=e.displayEmail,i.appendChild(s)),e.validSession||((d=document.createElement("div")).className="cjmd-secondarytext bm-p-accountchooser-item__signedout",d.textContent=cjBasics.lang.i18n("cj_i18n_01508","Signed out"),i.appendChild(d)),a.appendChild(i),a}!function(){t=function(){var e=document.createElement("div");e.className="bm-p-accountchooser-header",cjce.applyTemplate(e,"bm-loadingbar");var c=Math.ceil(72*window.devicePixelRatio),a=cjce.createElement("cjmd-icon",{circle:!0,size:72,url:l.account.photoUrl+"?sz="+c,backupUrl:"/images/avatar.svg"});a.classList.add("bm-p-accountchooser-header__avatar"),e.appendChild(a);var t=document.createElement("div");t.className="bm-p-accountchooser-header__details";var n=document.createElement("div");n.className="bm-p-accountchooser-header__name",n.textContent=l.account.displayName,t.appendChild(n);var o=document.createElement("div");o.className="cjmd-secondarytext bm-p-accountchooser-header__email",o.textContent=l.account.pageId?cjBasics.lang.i18n("cj_i18n_00363","Brand account"):l.account.displayEmail,t.appendChild(o);var i=cjce.createElement("cjmd-button",{color:!0,label:cjBasics.lang.i18n("cj_i18n_01506","Account"),onClick:function(){l.servicesDatabase.myaccount&&!l.missingGooglePermission?l.pageManager.navigate("myaccount"):l.openTab("https://myaccount.google.com/"+l.wizPath)}});i.classList.add("bm-p-accountchooser-header__button"),t.appendChild(i);var s=cjce.createElement("cjmd-button",{color:!0,label:cjBasics.lang.i18n("cj_i18n_00161","About me"),onClick:function(){l.servicesDatabase.aboutme&&!l.missingGooglePermission?l.pageManager.navigate("aboutme"):l.openTab("https://myaccount.google.com/"+l.wizPath+"profile")}});s.classList.add("bm-p-accountchooser-header__button"),t.appendChild(s),e.appendChild(t);var d=cjce.createElement("cjmd-button",{color:!0,label:cjBasics.lang.i18n("cj_i18n_01507","Sign out"),onClick:function(){browserStorage.local.get().then(function(e){return Object.keys(e).filter(function(e){return e.startsWith("bm_cache_")})}).then(browserStorage.local.remove),cjgApis.account.signout()}});return d.classList.add("bm-p-accountchooser-header__button"),t.appendChild(d),e.appendChild(t),e}(),c.appendChild(t);var a=cjce.createElement("cjmd-container",{scrollable:!0,shadow:"thinOnScroll"});c.appendChild(a);var s=cjce.createElement("cjmd-list"),e=cjce.createElement("cjmd-item",{icon:{size:24,color:"#1a73e8",withShell:!0,name:"__mdi:add"},label:cjBasics.lang.i18n("cj_i18n_00361","Add account"),onClick:function(){cjgApis.account.signin()}});s.appendChild(e),cjgApis.session.accountsList.then(function(e){var c,t={},n=l.account.authuser,o="0"!==n,i={};e.forEach(function(e){var c,a;e.pageId?t[e.pageId]=e:(e.obfuscatedId!==l.account.obfuscatedId&&(c=r(e),s.appendChild(c)),(a=e.authuser)!==n&&(i[a]=!0,o||"1"!==a||(o=!0)))}),a.appendChild(s),d&&(!o&&0===Object.keys(t).length||(c=Object.keys(i).map(function(e){return cjgApis.account.list({authuser:e}).then(function(e){e.forEach(function(e){var c,a=e.pageId;a&&((c=t[a])&&(!e.ownedBySelectedAccount||c.ownedBySelectedAccount)||(t[a]=e))})})}),Promise.all(c).then(function(){var e,c=Object.keys(t);0!==c.length&&(e=cjce.createElement("cjmd-subheader",{label:cjBasics.lang.i18n("cj_i18n_00744","Brand accounts")}),s.appendChild(e),c.map(function(e){return t[e]}).sort(function(e,c){return e.displayName<c.displayName?-1:1}).forEach(function(e){var c;e.obfuscatedId!==l.account.obfuscatedId&&(c=r(e,!0),s.appendChild(c))}))})))}).then(function(){t.cjceSetLoading(!1)})}()});