"use strict";cjce.registerTemplate("bm-p-travel",function(e,s){var i=s.instanceParameters.productId||"trips",a=i,t=!cjBasics.wrif.supported,n=cjBasics.uniqueId.generate(),r="https://www.google.com";var c={trips:{iconName:"__mdi:cjg_trips",serviceIcon:"trips",label:cjBasics.lang.i18n("cj_i18n_00307","Trips"),shortcutId:"830",external:!t&&!s.servicesDatabase.trips},destinations:{iconName:"__mdi:explore",serviceIcon:"travel",label:cjBasics.lang.i18n("cj_i18n_00061","Explore"),shortcutId:"764",external:!t&&!s.servicesDatabase.destinations},flights:{iconName:"__mdi:flight",serviceIcon:"flights",label:cjBasics.lang.i18n("cj_i18n_00414","Flights"),shortcutId:"56",external:!t&&!s.servicesDatabase.flights,path:"flights"},hotels:{iconName:"__mdi:hotel",serviceIcon:"hotels",label:cjBasics.lang.i18n("cj_i18n_01030","Hotels"),shortcutId:"94",external:!t&&!s.servicesDatabase.hotels,path:"hotels"},travelpackages:{iconName:"__mdi:beach_access",serviceIcon:"flights_and_hotels",label:cjBasics.lang.i18n("cj_i18n_01751","Packages"),shortcutId:"829",external:!t&&!s.servicesDatabase.travelpackages,path:"packages",divider:!0},trackedflightprices:{shortcutId:"831",serviceIcon:"flights",external:!t&&!s.servicesDatabase.trackedflightprices,iconName:"__mdi:timeline",label:cjBasics.lang.i18n("cj_i18n_01125","Tracked flight prices"),path:"flights/saves"},save:{label:cjBasics.lang.i18n("cj_i18n_01540","Google Collections"),iconName:"__mdi:bookmarks",external:!t&&!s.servicesDatabase.save,shortcutId:"359"},traveltrends:{label:cjBasics.lang.i18n("cj_i18n_01123","Travel Trends"),iconName:"__mdi:trending_up",external:!0,shortcutId:"828"}},l=["trips","destinations","flights","hotels","travelpackages","trackedflightprices"];"trips"!==i&&"destinations"!==i||l.push("save"),l.push("traveltrends");var o=l.map(function(e){var a=c[e];return a.id=e,a}),d=c[a],h=function(e){var a={bm_cid:"travel",bm_pid:i,bm_cst:"1",bm_wiz:"1",bm_iid:n,hl:cjBasics.lang.current};"destinations"===i&&(a.mode="guide");var t=r+"/",c=s.account.authuser;return"0"!==c&&(a.authuser=c),t+="travel/",e.path&&(t+=e.path),cjBasics.urlParams.attach(t,a)}(d);var p,g=cjce.createElement("bm-ogb",{loading:!t,serviceIcon:d.serviceIcon,serviceLabel:cjBasics.lang.i18n("cj_i18n_00308","Travel"),pageLabel:d.label,drawer:!t,onBack:function(){s.pageManager.navigate("flights")},displayBack:"trackedflightprices"===i,searchbox:t?{onSubmit:function(e){var a=encodeURIComponent(e),t=r;"hotels"===i?t+="/"+s.wizPath+"travel/hotels?q="+a:(t+="/search?q=","flights"===i&&(t+="flights+to+"),t+=a,"0"!==s.account.authuser&&(t+="&authuser="+s.account.authuser)),s.openTab(t)},submitInNewTab:!0}:null,bmApis:s,onNewTab:function(){var a=cjgShortcuts.getUrl(d.shortcutId,s.account);!t&&"trips"!==i&&"destinations"!==i||s.openTab(a),j.cjceGetCleanUrl(r).then(function(e){s.openTab(e||a)})}});function u(e,a){var t=a.newTabUrl||cjgShortcuts.getUrl(a.shortcutId,s.account);s.openTab(t)}function m(e){v.cjceSelectedId=a,s.pageManager.navigate(e)}e.appendChild(g),t&&(p=g.cjceSearchboxEl,s.setOnPageDisplayHandler(p.select));var b,v=cjce.createElement("bm-navlist",{selectedId:t?null:a,theme:"solid",items:o,onChange:m,onClick:t?u:m,onNewTab:u});if(t){var _=cjce.createElement("cjmd-container",{shadow:"thinOnScroll"});return _.appendChild(v),void e.appendChild(_)}"flights"===i&&(b=cjce.createElement("cjmd-iconbutton",{iconName:c.trackedflightprices.iconName,label:c.trackedflightprices.label,onClick:function(){s.pageManager.navigate("trackedflightprices")}}),g.cjceAppendChild(b)),g.cjceDrawerEl.appendChild(v);var f=-1!==["flights","hotels","trackedflightprices"].indexOf(i);cjBasics.webRequest.handleIframeHeaders([r+"/*bm_iid="+n+"*"],{disableOgs:r,useMobileUserAgent:f,handleFirefoxInject:!0});var j=cjce.createElement("bm-iframe",{onMessage:function(e){var a;"travelOpenUrl"===e.bm_method&&(a=cjBasics.cleanBmUrl(e.bm_value),s.openTab(a))},sandbox:"hotels"===i?"allow-popups allow-popups-to-escape-sandbox allow-forms":null,src:h,solid:"#fff",shadow:!0,onLoad:function(){g.cjceSetLoading(!1)}});e.appendChild(j)});