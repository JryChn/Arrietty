"use strict";cjce.registerTemplate("bm-p-reminders__reminderslist",function(t,e){var n,r=e.bmApis,a=e.onLoadChange,s="https://keep.google.com/"+r.wizPath,i=["https://www.googleapis.com/auth/reminders"],c=window.atob("QUl6YVN5QldkTkdkdEZBVk1ucktVaTA0YnRxcVhvVzNsNHNvMFVr");function l(){var e=cjgShortcuts.getUrl("540",r.account);r.openTab(e)}function o(){var e=cjce.createElement("bm-fulldialog",{bmApis:r,onNewTab:l,lockup:{label:cjBasics.lang.i18n("cj_i18n_00081","Reminders")},iconName:"reminders",message:cjBasics.lang.i18n("cj_i18n_00212","To use Reminders, you need to give access to load your Google Reminders data"),actionLabel:cjBasics.lang.i18n("cj_i18n_01916","Continue with Google"),actionG:!0,action:function(){cjgApis.auth.requestPermissions(r.account,i)}});t.appendChild(e)}function d(e,n){var t=!e.dueDate,a=!n.dueDate;if(t&&a)return e.title>n.title?1:-1;if(t)return 1;if(a)return-1;var i=!0===e.dueDate.unspecifiedFutureTime,c=!0===n.dueDate.unspecifiedFutureTime;if(i&&c)return e.title>n.title?1:-1;if(i)return 1;if(c)return-1;var r=parseInt(e.dueDate.absoluteTimeMs,10),s=parseInt(n.dueDate.absoluteTimeMs,10),l=e.dueDate.allDay,o=n.dueDate.allDay;if(e.dueDate.day===n.dueDate.day){if(l&&o||r===s)return e.title>n.title?1:-1;if(l)return-1;if(o)return 1}return s<r?-1:1}function u(e){var n=function(e){var n=e.extensions&&e.extensions.keepExtension&&e.extensions.keepExtension,t=n&&(n.serverNoteId||n.clientNoteId);if(t)return s+"#NOTE/"+t;var a=e.externalApplicationLink,i=a&&"keepReminder"===a.application&&a.id;return i?s+"?reminder="+i:void 0}(e);if(n)return{label:cjBasics.lang.i18n("cj_i18n_00215","View note"),onClick:function(){r.openTab(n)}};var t=e.assistance&&e.assistance.taskAssistance&&e.assistance.taskAssistance.assistance&&e.assistance.taskAssistance.assistance[0];if(!t)return null;if(t.callAction){var a=t.callAction.phoneNumber;if(!a)return null;var i=a[0]&&a[0].phoneNumber;return i?{label:cjBasics.lang.i18n("cj_i18n_00213","Call"),onClick:function(){var e=cjBasics.urlParams.attach("https://hangouts.google.com/",{authuser:r.account.authuser,action:"chat",pn:i});r.openTab(e)}}:null}if(t.emailAction){var c=t.emailAction.emailAddress&&t.emailAction.emailAddress[0]&&t.emailAction.emailAddress[0].emailAddress;return{label:cjBasics.lang.i18n("cj_i18n_00214","Email"),onClick:function(){r.openTab("mailto:"+c)}}}return null}function m(e){var n,t=cjce.createElement("cjmd-card",{withPadding:!0}),a=cjce.createElement("cjmd-title",{label:e.title||cjBasics.lang.i18n("cj_i18n_01737","(No title)")});t.appendChild(a),e.dueDate&&((n=document.createElement("div")).className="cjmd-secondarytext",n.textContent=function(e){if(e.unspecifiedFutureTime)return"Someday";var n=new Date;return n.setFullYear(e.year),n.setMonth(e.month-1),n.setDate(e.day),e.time&&(n.setHours(e.time.hour),n.setMinutes(e.time.minute),n.setSeconds(e.time.second)),cjBasics.datetime.printDateString(n.getTime(),{time:!e.allDay,weekday:!0})}(e.dueDate),t.appendChild(n));var i,c=u(e);return c&&((i=cjce.createElement("cjmd-button",{color:!0,hairline:!0,label:c.label,onClick:c.onClick})).style.marginTop="8px",t.appendChild(i)),t}function p(e){var n;t.textContent="",Array.isArray(e)&&0<e.length?e.forEach(function(e){var n=m(e);t.appendChild(n)}):(n=cjce.createElement("cjmd-emptystate",{label:cjBasics.lang.i18n("cj_i18n_01499","No reminders found"),iconName:"__mdi:reminder"}),t.appendChild(n))}cjce.applyTemplate(t,"cjmd-container",{scrollable:!0,shadow:"transparentOnScroll"}),cjgApis.cache.getItem(r.account,"bm_cache_v30__reminders__reminders").then(function(e){Array.isArray(e)&&(n=JSON.stringify(e),p(e))}),cjgApis.request("https://reminders-pa.googleapis.com/v1internalOP/reminders/list?fields=*",{method:"POST",fetchAs:"json",headers:{"Content-Type":"application/json"},body:JSON.stringify({includeDeleted:!1,includeArchived:!1})},{pa:!0,key:c,account:r.account,requiredScopes:i}).then(function(e){var n=e.task.sort(d);return cjgApis.cache.setItem(r.account,"bm_cache_v30__reminders__reminders",n),n},o).then(function(e){return Array.isArray(e)?e:[]},function(){return[]}).then(function(e){n&&JSON.stringify(e)===n||(p(e),a&&a(!1))})}),cjce.registerTemplate("bm-p-reminders",function(e,a){var n=cjce.createElement("bm-ogb",{loading:!0,drawer:!0,serviceIcon:"reminders",serviceLabel:cjBasics.lang.i18n("cj_i18n_00081","Reminders"),pageLabel:cjBasics.lang.i18n("cj_i18n_00291","Home"),bmApis:a,onNewTab:function(){var e=cjgShortcuts.getUrl("540",a.account);a.openTab(e)}});e.appendChild(n);var t={reminders:{iconName:"__mdi:home",label:cjBasics.lang.i18n("cj_i18n_00291","Home"),shortcutId:"561"},relatedHeader:{header:!0,color:!0,label:cjBasics.lang.i18n("cj_i18n_01539","Related apps")},calendar:{iconName:"__mdi:event",label:cjBasics.lang.i18n("cj_i18n_00302","Calendar"),shortcutId:"27"},keep:{iconName:"__mdi:drive_keep",label:cjBasics.lang.i18n("cj_i18n_00422","Keep"),shortcutId:"97"},tasks:{iconName:"__mdi:tasks",label:cjBasics.lang.i18n("cj_i18n_00439","Tasks"),shortcutId:"140"}},i=cjce.createElement("bm-navlist",{selectedId:"reminders",items:t,onClick:function(e){a.pageManager.navigate(e)},onNewTab:function(e,n){var t=n.newTabUrl||cjgShortcuts.getUrl(n.shortcutId,a.account);a.openTab(t)}});n.cjceDrawerEl.appendChild(i);var c=cjce.createElement("bm-p-reminders__reminderslist",{bmApis:a,onLoadChange:function(e){n.cjceSetLoading(e)}});e.appendChild(c)});