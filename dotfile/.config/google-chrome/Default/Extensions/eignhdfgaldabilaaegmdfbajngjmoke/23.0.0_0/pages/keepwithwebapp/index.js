"use strict";cjce.registerTemplate("bm-p-keepwithwebapp",function(n,l){var o,t,r,m,s="https://keep.google.com",i=s+"/"+l.wizPath,d=cjBasics.lang.i18n("cj_i18n_01169","Notes"),b="home",_=[],p=!1,h=["home","reminders"],j=["editlabels","archive","trash"],u={home:{label:cjBasics.lang.i18n("cj_i18n_01169","Notes"),iconName:"__mdi:lightbulb_outline",newTabUrl:!0},reminders:{label:cjBasics.lang.i18n("cj_i18n_00081","Reminders"),iconName:"__mdi:notifications",newTabUrl:!0},editlabels:{label:cjBasics.lang.i18n("cj_i18n_06576","Edit labels"),iconName:"__mdi:edit"},archive:{label:cjBasics.lang.i18n("cj_i18n_00821","Archive"),iconName:"__mdi:archive",newTabUrl:!0},trash:{label:cjBasics.lang.i18n("cj_i18n_00005","Bin"),iconName:"__mdi:delete",newTabUrl:!0}};function w(){var e=r,a=[];_.forEach(function(e){var c="label/"+encodeURIComponent(e);u[c]||(u[c]={label:e,iconName:"__mdi:label",newTabUrl:!0}),a.push(c)});var c=h.concat(a,j),n={};c.forEach(function(e){n[e]=u[e]}),r=cjce.createElement("bm-navlist",{isSelector:!0,selectedId:b,items:n,onChange:function(e){"editlabels"===e?(r.cjceSelectedId=b,m.cjceSendFrameCommand({method:"keepwithwebappEditLabels"},s)):g(e)},onNewTab:f}),t.appendChild(r);var i=t.contains(document.activeElement);cjce.replaceChild(t,r,e),i&&t.cjceToggleState(!0)}function f(e){e&&"home"!==e?l.openTab(i+"#"+e):l.openTab(i)}function g(e){m.cjceSendFrameCommand({method:"keepwithwebappSetHash",value:e},s)}function v(e,c){(c?f:g)(e)}!function(){var e=cjce.createElement("cjmd-fabgroup",{items:[cjce.createElement("gmd-fab",{label:cjBasics.lang.i18n("cj_i18n_06306","New note"),onClick:function(){v("newnote")},onMetaClick:function(){v("newnote",!0)}}),cjce.createElement("cjmd-fab",{mini:!0,iconName:"__mdi:check_box",label:cjBasics.lang.i18n("cj_i18n_06307","New list"),onClick:function(){v("newlist")},onMetaClick:function(){v("newlist",!0)}}),cjce.createElement("cjmd-fab",{mini:!0,iconName:"__mdi:add_alert",label:cjBasics.lang.i18n("cj_i18n_06308","New reminder"),onClick:function(){v("newreminder")},onMetaClick:function(){v("newreminder",!0)}})]});n.appendChild(e),o=cjce.createElement("bm-ogb",{loading:!0,drawer:{color:"#f5a900"},serviceIcon:"keep",serviceLabel:cjBasics.lang.i18n("cj_i18n_00422","Keep"),pageLabel:d,searchbox:{color:"#fbbc05",onSubmit:function(e){m.cjceSendFrameCommand({method:"keepwithwebappSearchQuery",value:e},s)},onClear:function(){m.cjceSendFrameCommand({method:"keepwithwebappSearchQuery",value:""},s)}},bmApis:l,onNewTab:function(){f(b)}}),n.appendChild(o),l.setOnPageDisplayHandler(o.cjceSearchboxEl.select),t=o.cjceDrawerEl;var c=cjBasics.uniqueId.generate(),a=cjBasics.urlParams.attach(i,{bm_cid:"keepwithwebapp",bm_udm:l.darkMode?"1":null,bm_iid:c,forcehl:"1",hl:cjBasics.lang.current});cjBasics.webRequest.handleIframeHeaders([s+"/*bm_iid="+c+"*"],{disableOgs:s}),w(),cjgApis.cache.getItem(l.account,"bm_cache_v30__keep__customlabels").then(function(e){!p&&Array.isArray(e)&&0<e.length&&(_=e,w())}),m=cjce.createElement("bm-iframe",{src:a,shadow:!0,onMessage:function(e){var c,a,n=e.bm_method,i=e.bm_value;if("keepwithwebappUpdateView"===n&&(((r.cjceSelectedId=i).startsWith("label/")||u[i])&&(a=(c=u[i])?c.label:decodeURIComponent(i.replace("label/","")),o.cjceSetPageLabel(a)),b=i),"keepwithwebappLabels"===n){p=!0;var t=Array.isArray(i)?i:[];if(JSON.stringify(_)===JSON.stringify(t))return;_=t,w(),cjgApis.cache.setItem(l.account,"bm_cache_v30__keep__customlabels",_)}},onLoad:function(){o.cjceSetLoading(!1)}}),n.appendChild(m)}()});