"use strict";!function(){var y="id,webViewLink,shortcutDetails,exportLinks,webContentLink,iconLink,name,mimeType,capabilities(canTrash,canUntrash,canRename,canDownload),modifiedTime,shared,starred,trashed,thumbnailLink,folderColorRgb",C=["https://www.googleapis.com/auth/drive"],k="https://content.googleapis.com/drive/v3/",c={archive:{name:"__mdi:drive_archive"},audio:{name:"__mdi:drive_audio",color:"#ea4335"},jam:{name:"__mdi:cj_jam_drive",color:"#fb8c00"},appmaker:{name:"__mdi:cjg_app_maker",color:"#ef6c00"},datareport:{name:"__mdi:cj_gmp_data_studio_report",color:"#1a73e8"},chart:{name:"__mdi:drive_chart",color:"#34a853"},document:{name:"__mdi:drive_document",color:"#4285f4"},drawing:{name:"__mdi:drive_drawing",color:"#ea4335"},earth:{name:"__mdi:earth",color:"#4285f4"},excel:{name:"__mdi:drive_ms_excel",color:"#34a853"},form:{name:"__mdi:drive_form",color:"#673ab7"},fusion:{name:"__mdi:drive_fusiontable",color:"#34a853"},generic:{name:"__mdi:drive_file",color:"#1a73e8"},image:{name:"__mdi:drive_image",color:"#ea4335"},keep:{name:"__mdi:lightbulb",color:"#fbbc05"},map:{name:"__mdi:file_map",color:"#ea4335"},pdf:{name:"__mdi:drive_pdf",color:"#fe4a22"},powerpoint:{name:"__mdi:drive_ms_powerpoint",color:"#ff752a"},presentation:{name:"__mdi:drive_presentation",color:"#fbbc05"},script:{name:"__mdi:drive_script",color:"#1a73e8"},sites:{name:"__mdi:atari_site",color:"#3e50b4"},spreadsheet:{name:"__mdi:drive_spreadsheet",color:"#34a853"},text:{name:"__mdi:drive_text",color:"#1a73e8"},video:{name:"__mdi:drive_video",color:"#ea4335"},word:{name:"__mdi:drive_ms_word",color:"#4583ea"},shortcut:{name:"__mdi:shortcut"},zip:{name:"__mdi:drive_zip"},upload:{name:"__mdi:file_upload"}},r={"application/msword":"word","application/octet-stream":"generic","application/pdf":"pdf","application/vnd.google-analytics.rap.report":"datareport","application/vnd.google-apps.appmaker":"appmaker","application/vnd.google-apps.audio":"audio","application/vnd.google-apps.document":"document","application/vnd.google-apps.drawing":"drawing","application/vnd.google-apps.file":"generic","application/vnd.google-apps.form":"form","application/vnd.google-apps.fusiontable":"fusion","application/vnd.google-apps.jam":"jam","application/vnd.google-apps.map":"map","application/vnd.google-apps.photo":"image","application/vnd.google-apps.presentation":"presentation","application/vnd.google-apps.script":"script","application/vnd.google-apps.shortcut":"shortcut","application/vnd.google-apps.site":"sites","application/vnd.google-apps.sites":"sites","application/vnd.google-apps.spreadsheet":"spreadsheet","application/vnd.google-apps.unknown":"generic","application/vnd.google-apps.video":"video","application/vnd.ms-excel":"excel","application/vnd.ms-powerpoint":"powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation":"powerpoint","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"excel","application/zip":"archive","vnd.openxmlformats-officedocument.wordprocessingml.document":"word"};function f(e,i){var t=i.targetMimeType,a=r[t];if(a)return c[a];if(i.isFolder){var n=(e.folderColorRgb||"").toLowerCase();return{name:e.shared?"__mdi:folder_shared":"__mdi:folder",color:n&&-1===n.indexOf("8f8f8f")&&-1===n.indexOf("5f6368")?n:null}}if(t.startsWith("image/"))return c.image;if(t.startsWith("video/"))return c.video;if(t.startsWith("audio/"))return c.audio;if(t.startsWith("text/"))return c.text;var o=e.iconLink;return-1!==o.indexOf("googleusercontent.com/16/type/")&&(o=o.replace("/16/type/","/32/type/")),{url:o,size:18}}function L(e,i){var t=new URL(e.webViewLink);return t.searchParams.delete("usp"),i&&i.authuser&&"0"!==i.authuser&&t.searchParams.set("authuser",i.authuser),t.href}function _(e){var i=document.createElement("a");i.href=e,i.download=!0,i.setAttribute("style","all:initial !important;visibility: hidden !important;opacity:0 !important;pointer-events: none !important;position: fixed !important;"),i.textContent="Download",document.body.appendChild(i),i.click(),setTimeout(function(){i.remove()},1e4)}function j(d,l,s,e){var m=s.starred,p=s.trashed,i=s.capabilities,t={openInNew:{iconName:"__mdi:open_in_new",label:cjBasics.lang.i18n("cj_i18n_01545","Open in a new tab")},copyLink:{iconName:"__mdi:link",label:cjBasics.lang.i18n("cj_i18n_01901","Copy link")},starred:{iconName:m?"__mdi:star":"__mdi:star_border",label:m?cjBasics.lang.i18n("cj_i18n_01902","Remove from Starred"):cjBasics.lang.i18n("cj_i18n_01903","Add to Starred")},rename:{iconName:"__mdi:cjg_rename",label:cjBasics.lang.i18n("cj_i18n_01940","Rename")},trash:{iconName:p?"__mdi:history":"__mdi:delete",label:p?cjBasics.lang.i18n("cj_i18n_01905","Restore"):cjBasics.lang.i18n("cj_i18n_01904","Move to Trash")},locate:{iconName:"cj_search_in_new",label:cjBasics.lang.i18n("cj_i18n_06565","Locate in new")},download:{iconName:"__mdi:file_download",label:cjBasics.lang.i18n("cj_i18n_01622","Download")},downloadPdf:{iconName:"__mdi:file_download",label:cjBasics.lang.i18n("cj_i18n_06326","Download as PDF")}};return e||delete t.openInNew,i.canRename||delete t.rename,s.exportLinks&&s.exportLinks["application/pdf"]||delete t.downloadPdf,s.webContentLink&&i.canDownload||delete t.download,(p?i.canUntrash:i.canTrash)||delete t.trash,cjce.createElement("cjmd-iconbuttonmenu",{label:cjBasics.lang.i18n("cj_i18n_06294","More actions"),items:t,compact:!0,onClick:function(e){var i,t,a,n,o,c,r;"trash"===e?u(l,s.id,{trashed:!p}).then(function(e){e&&d.remove()}):"starred"===e?u(l,s.id,{starred:!m}).then(function(e){var i;e&&(m=!m,s.starred=m,(i=d.querySelector(".cjg-doclist__listitem__staricon"))&&i.classList.toggle("cjg-doclist__listitem__staricon--starred",m))}):"copyLink"===e?cjBasics.clipboard.copy(L(s)):"rename"===e?function(t,e,a){var n=cjce.createElement("cjmd-textfield",{label:cjBasics.lang.i18n("cj_i18n_01943","File name")}),o=cjBasics.lang.i18n("cj_i18n_01942","Untitled file");n.cjceValue=a.name||o;var i=cjce.createElement("cjmd-dialog",{title:cjBasics.lang.i18n("cj_i18n_01941","Rename file"),message:cjBasics.lang.i18n("cj_i18n_01944","Please enter a file name"),confirmLabel:cjBasics.lang.i18n("cj_i18n_01940","Rename"),cancelLabel:cjBasics.lang.i18n("cj_i18n_01659","Cancel"),additionalFragment:n,onConfirm:function(){var i=n.cjceValue||o;u(e,a.id,{name:i}).then(function(e){e&&(t.querySelector(".cjmd-item__header").textContent=i)})}});document.body.appendChild(i),setTimeout(function(){i.showModal(),i=null,n.cjceSelect()})}(d,l,s):"openInNew"===e||"locate"===e?(t="https://drive.google.com/drive/","0"!==(i=l.gAccount.authuser)&&(t+="u/"+i+"/"),a="openInNew"===e?t+"folders/"+s.id:cjBasics.urlParams.attach(t,{action:"locate",id:s.id}),l.openInNew(a)):"download"===e?_(s.webContentLink):"downloadPdf"===e&&_((n=s,o=l.gAccount,c="application/pdf",(r=new URL(n.exportLinks[c])).searchParams.delete("usp"),o&&o.authuser&&"0"!==o.authuser&&r.searchParams.set("authuser",o.authuser),r.href))}})}function N(e){return cjce.createElement("cjmd-emptystate",{label:(t=e,cjBasics.lang.i18n("cj_i18n_02174","No __entity_name__ found").replace("__entity_name__",t.entityName)),subLabel:(i=e).searching?cjBasics.lang.i18n("cj_i18n_00116","Try a synonym or more general keyword"):i.noNewFile?cjBasics.lang.i18n("cj_i18n_02175","You can add new __entity_name__ using the button below").replace("__entity_name__",i.entityName):null,iconName:e.emptyStateIcon,color:e.primaryColor});var i,t}var i,l,a=(i=/\\(u\{([0-9A-Fa-f]+)\}|u([0-9A-Fa-f]{4})|x([0-9A-Fa-f]{2})|([1-7][0-7]{0,2}|[0-7]{2,3})|(['"tbrnfv0\\]))|\\U([0-9A-Fa-f]{8})/g,l={0:"\0",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v","'":"'",'"':'"',"\\":"\\"},function(e){return e.replace(i,function(e,i,t,a,n,o,c,r){return t?s(t):a?s(a):n?s(n):o?(d=o,String.fromCodePoint(parseInt(d,8))):r?s(r):l[c];var d})});function s(e){return String.fromCodePoint(parseInt(e,16))}function B(n){return e=n,cjBasics.ajax("https://drive.google.com/drive/u/"+e.gAccount.authuser+"/priority?id="+cjBasics.uniqueId.generate()).then(function(e){var i=e.split("window['_DRIVE_dsp'][ 3.0 ] = '")[1].split("'")[0],t=a(i);return JSON.parse(JSON.parse(t)[2]).item.sort(function(e,i){return e.confidenceScore>i.confidenceScore?-1:1}).map(function(e){return e.itemId})}).catch(function(){return[]}).then(function(e){return Promise.all(e.map(function(e){return i=n,t=e,a=cjBasics.urlParams.attach(k+"files/"+t,{prettyPrint:"false",supportsAllDrives:"true",fields:y}),cjgApis.request(a,{fetchAs:"json"},{account:i.gAccount,requiredScopes:C}).then(function(e){return e.hasThumbnail="thumbnailLink"in e,delete e.thumbnailLink,e},function(){return{}});var i,t,a}))});var e}function u(e,i,t){var a=cjBasics.urlParams.attach(k+"files/"+i,{prettyPrint:"false",supportsAllDrives:"true",includeItemsFromAllDrives:"true",fields:"id"});return cjgApis.request(a,{fetchAs:"json",method:"PATCH",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}},{account:e.gAccount,requiredScopes:C}).then(function(e){return e&&e.id===i})}function x(e,i){var t=e.shortcutDetails&&e.shortcutDetails.targetMimeType||e.mimeType,a="application/vnd.google-apps.folder"===t,n={targetMimeType:t,isFolder:a},o=(i.listview?function(e,i,t){var a,n=i.isFolder,o=cjce.createElement("cjmd-item"),c=f(e,i),r=cjce.createElement("cjmd-icon",{theme:"solid",name:c.name,url:c.url,size:c.size,color:c.color||t.defaultFileColor});c.url&&r.classList.add("cjg-doclist__listitem__customicon"),e.shortcutDetails&&((a=document.createElement("div")).className="cjg-doclist__listitem__shortcuticon",r.appendChild(a)),o.appendChild(r);var d=document.createElement("div");d.className="cjmd-item__body";var l,s,m,p,_=document.createElement("div");_.className="cjmd-item__header",_.textContent=e.name,d.appendChild(_),e.shared&&!n&&((l=cjce.createElement("cjmd-icon",{theme:"solid",name:"__mdi:people",size:20})).classList.add("cjg-doclist__listitem__infoicon"),_.appendChild(l)),t.isStarredView||((s=cjce.createElement("cjmd-icon",{theme:"solid",name:"__mdi:star",size:20})).classList.add("cjg-doclist__listitem__infoicon","cjg-doclist__listitem__staricon"),e.starred&&s.classList.add("cjg-doclist__listitem__staricon--starred"),_.appendChild(s)),e.modifiedTime&&(m=document.createElement("div"),p=cjBasics.datetime.printDateString(e.modifiedTime,{alwaysYear:!0}),m.className="cjmd-secondarytext",m.textContent=" "+cjBasics.lang.i18n("cj_i18n_00006","modified")+": "+p,d.appendChild(m)),o.appendChild(d);var u,g=document.createElement("div");g.className="cjmd-item__hovertools",o.appendChild(g),n&&((u=cjce.createElement("cjmd-iconbutton",{iconName:"__mdi:open_in_new",label:cjBasics.lang.i18n("cj_i18n_00123","Open folder in new tab")})).dataset.id=e.id,u.dataset.openInNew="1",u.classList.add("cjg-doclist__fileitem"),g.appendChild(u));var h=j(o,t,e);return g.appendChild(h),o}:function(e,i,t){var a=i.isFolder,n=t.foldersOnTop&&a,o=cjce.createElement("cjmd-griditem");o.classList.add("cjg-doclist__griditem");var c,r,d,l,s,m,p,_,u,g,h=f(e,i);return n||((c=document.createElement("div")).className="cjg-doclist__griditem__thumbnail","__mdi:drive_image"===h.name&&c.classList.add("cjg-doclist__griditem__thumbnail--photo"),o.appendChild(c),e.hasThumbnail?(c.classList.add("cjg-doclist__griditem__thumbnail--customimage"),r=cjBasics.urlParams.attach("https://drive.google.com/thumbnail",{authuser:t.gAccount.authuser,id:e.id,sz:"w"+Math.ceil(144*window.devicePixelRatio)}),c.style.backgroundImage='url("'+r+'")'):(d=cjce.createElement("cjmd-icon",{theme:"solid",size:96,color:t.darkMode?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, .15)",name:h.name}),c.appendChild(d))),t.hideLabels?o.classList.add("cjg-doclist__griditem--nolabels"):((l=document.createElement("div")).className="cjmd-grid__item__bottom cjg-doclist__griditem__bottom",o.appendChild(l),(s=cjce.createElement("cjmd-icon",{theme:"solid",name:h.name,color:h.color||t.defaultFileColor,url:h.url,size:h.size})).classList.add("cjg-doclist__griditem__icon"),l.appendChild(s),(m=document.createElement("div")).className="cjmd-grid__item__textcontainer",l.appendChild(m),(p=document.createElement("span")).className="cjg-doclist__griditem__tools",l.appendChild(p),_=j(o,t,e,n&&a),p.appendChild(_),u=document.createElement("div"),g=e.name||cjBasics.lang.i18n("cj_i18n_06564","File"),u.textContent=g,m.appendChild(u),20<g.length&&(u.title=g)),o})(e,n,i);return o.classList.add("cjg-doclist__fileitem"),o.dataset.id=e.id,o.tabIndex=0,a||(o.dataset.openInNew="1"),o}cjce.registerTemplate("cjg-doclist",function(c,r){var d=r.orderBy&&-1!==r.orderBy.indexOf("older"),l={},s={openInNew:r.openInNew,gAccount:r.gAccount,noNewFile:r.noNewFile,additionalFragment:r.additionalFragment,listview:r.listview,entityName:r.entityName||cjBasics.lang.i18n("cj_i18n_00144","files"),emptyStateIcon:r.emptyStateIcon||"__mdi:drive_file",primaryColor:r.primaryColor||"#1a73e8",searching:r.searching||!1,cachingId:r.cachingId||null,hideLabels:r.hideLabels,priority:r.priority,foldersOnTop:d,isStarredView:r.q&&-1!==r.q.indexOf("starred"),darkMode:r.darkMode,defaultFileColor:r.darkMode?"#bdc1c6":"#5f6368"},e=Math.round(document.documentElement.offsetHeight*document.documentElement.offsetWidth/7500);e<50&&(e=50);var a={orderBy:r.orderBy,q:r.q,priority:r.priority,pageSize:e,gAccount:s.gAccount};cjce.applyTemplate(c,"cjmd-container",{scrollable:!0,shadow:r.shadow||"transparentOnScroll",infiniteScroll:!0}),cjce.applyTemplate(c,"basic-anyclickhandler",{onClick:function(e){var i,t,a,n,o=document.activeElement;o.classList.contains("cjg-doclist__fileitem")&&(i=o.dataset.id,t=!r.onFolderClick||cjBasics.events.hasMeta(e)||"1"===o.dataset.openInNew,a=function(e){var i=e.shortcutDetails;if(!i)return e;var t=JSON.parse(JSON.stringify(e));return t.mimeType=i.targetMimeType,t.id=i.targetId,t.webViewLink=i.webViewLink||"https://drive.google.com/file/d/"+i.targetId+"/view",delete t.shortcutDetails,t}(l[i]),t?(n=L(a,s.gAccount),s.openInNew(n)):r.onFolderClick(a))}});var n=cjce.createElement("cjmd-subheader",{label:cjBasics.lang.i18n("cj_i18n_00121","Folders"),color:!0}),m=cjce.createElement("cjmd-subheader",{label:cjBasics.lang.i18n("cj_i18n_00122","Files"),color:!0}),i=s.listview?"cjmd-list":"cjmd-grid",p=cjce.createElement(i),_=cjce.createElement(i);s.listview||(p.classList.add("cjg-doclist__grid"),_.classList.add("cjg-doclist__grid"));var u=document.createDocumentFragment(),g=document.createDocumentFragment(),h=!1,f=!1;function o(e){r.onLoadingChange&&c.parentNode&&r.onLoadingChange(e)}function j(e){for(var i=0;i<e.length;i++){var t=e[i],a="application/vnd.google-apps.folder"===(t.shortcutDetails&&t.shortcutDetails.targetMimeType||t.mimeType),n=t.id;l[n]=t,!d||a||h||(h=!0,c.appendChild(m),c.appendChild(_));var o=x(t,s);d&&a&&f?g.appendChild(o):u.appendChild(o)}p.appendChild(g),_.appendChild(u)}function v(e){var i,t,a;c.textContent="",h=!1,0!==e.length?(p.textContent="",_.textContent="",t=(i=e[0]).shortcutDetails&&i.shortcutDetails.targetMimeType||i.mimeType,f="application/vnd.google-apps.folder"===t,s.additionalFragment&&(c.appendChild(s.additionalFragment),d&&f||c.appendChild(m)),d&&f?(c.appendChild(n),c.appendChild(p)):(h=!0,c.appendChild(_)),c.appendChild(_),j(e)):(a=N(s),c.appendChild(a))}var w=!0,b=null;s.cachingId&&cjgApis.cache.getItem(s.gAccount,s.cachingId).then(function(e){var i;!1!==w&&e&&(i=JSON.parse(e),Array.isArray(i)&&(v(i),b=e,s.priority&&o(!1)))}),function t(){return b&&s.priority||o(!0),function t(a){if(a.priority)return B(a).then(function(e){var i=e.filter(function(e){return e.id});return 0===i.length?t({q:"(not mimeType = 'application/vnd.google-apps.folder') and trashed = false",orderBy:"recency desc",gAccount:a.gAccount,pageToken:a.pageToken,pageSize:10}):{files:i}});var e=cjBasics.urlParams.attach(k+"files",{prettyPrint:"false",pageToken:a.pageToken,pageSize:a.pageSize,supportsAllDrives:"true",includeItemsFromAllDrives:"true",q:a.q,orderBy:a.orderBy,fields:"files("+y+"),nextPageToken"});return cjgApis.request(e,{fetchAs:"json"},{account:a.gAccount,requiredScopes:C}).then(function(e){return{nextPageToken:e.nextPageToken,files:e.files.map(function(e){return e.hasThumbnail="thumbnailLink"in e,delete e.thumbnailLink,e})}})}(a).then(function(e){if(e.nextPageToken&&(a.pageToken=e.nextPageToken,c.cjceSetInfiniteScroll(t)),w){w=!1;var i=JSON.stringify(e.files);if(i===b)return void o(!1);s.priority&&b||v(e.files),b=i,cjgApis.cache.setItem(s.gAccount,s.cachingId,i)}else j(e.files);o(!1)},function(){})}()})}();