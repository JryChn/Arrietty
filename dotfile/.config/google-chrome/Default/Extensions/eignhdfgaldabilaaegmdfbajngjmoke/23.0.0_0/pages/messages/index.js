"use strict";cjce.registerTemplate("bm-p-messages",function(e,c){var n="https://messages.google.com",a=n+"/web/authentication",t="conversations",s=!1,o={conversations:{iconName:"__mdi:message",label:cjBasics.lang.i18n("cj_i18n_01487","Conversations"),newTabUrl:n+"/web/conversations"},archived:{iconName:"__mdi:archive",label:cjBasics.lang.i18n("cj_i18n_01740","Archived"),newTabUrl:n+"/web/conversations"},settings:{iconName:"__mdi:settings",label:cjBasics.lang.i18n("cj_i18n_00298","Settings"),newTabUrl:n+"/web/settings"},relatedHeader:{header:!0,color:!0,label:cjBasics.lang.i18n("cj_i18n_01539","Related apps")},hangouts:{iconName:"__mdi:hangout",label:cjBasics.lang.i18n("cj_i18n_01337","Classic Hangouts"),shortcutId:"218"},chat:{iconName:"__mdi:cjg_chat",label:cjBasics.lang.i18n("cj_i18n_01338","Hangouts Chat"),shortcutId:"559",external:!c.servicesDatabase.chat},meet:{iconName:"__mdi:meet",label:cjBasics.lang.i18n("cj_i18n_01493","Hangouts Meet"),shortcutId:"545",external:!c.servicesDatabase.meet}},r={authentication:cjBasics.lang.i18n("cj_i18n_01745","Connect phone"),newConversation:cjBasics.lang.i18n("cj_i18n_01741","New conversation"),newGroupConversation:cjBasics.lang.i18n("cj_i18n_01742","New group conversation"),conversation:cjBasics.lang.i18n("cj_i18n_01743","Conversation")},l=cjce.createElement("bm-ogb",{drawer:!0,withShadow:!0,serviceIcon:"messages",serviceLabel:cjBasics.lang.i18n("cj_i18n_01084","Messages"),pageLabel:cjBasics.lang.i18n("cj_i18n_01174","Loading"),bmApis:c,onNewTab:function(){b.cjceGetCleanUrl(n).then(function(e){var n=e||a;c.openTab(n)})},onBack:function(){b.cjceSendFrameCommand({method:"bmCstNavigateBack"},n)}});function i(e){b.cjceSendFrameCommand({method:"bmCstClickDomElement",value:e},n)}function d(){i(".notifications-button")}e.appendChild(l);var m=cjce.createElement("cjmd-iconbutton",{label:cjBasics.lang.i18n("cj_i18n_06600","Unmute notifications"),iconName:"__mdi:notifications_off",onClick:d});m.hidden=!0,l.cjceAppendChild(m);var j=cjce.createElement("cjmd-iconbutton",{label:cjBasics.lang.i18n("cj_i18n_06599","Mute notifications"),iconName:"__mdi:notifications",onClick:d});j.hidden=!0,l.cjceAppendChild(j);var _=cjce.createElement("cjmd-iconbutton",{iconName:"__mdi:more_vert",onClick:function(){i(".conversation-menu-icon")}});_.hidden=!0,l.querySelector(".cjmd-appbar").appendChild(_);var g=cjBasics.uniqueId.generate();function h(e){var n="conversation"===e;j.hidden=!n||!s,m.hidden=!n||s,_.hidden=!n,l.cjceSetDropdownState("authentication"!==e)}cjBasics.webRequest.handleIframeHeaders([n+"/*bm_iid="+g+"*"],{handleSwCache:!0,handleFirefoxInject:!0});var b=cjce.createElement("bm-iframe",{isSelector:!0,src:cjBasics.urlParams.attach(a,{bm_iid:g,bm_cid:"messages",hl:cjBasics.lang.current,bm_cst:"1",bm_udm:c.darkMode?"1":"0"}),onMessage:function(e){var n,a,c=e.bm_method,i=e.bm_value;"messagesWebsiteView"===c?(h(t=i),a=(n=o[t])&&n.label||r[t],l.cjceSetPageLabel(a),v.cjceSelectedId=t):"messagesBackState"===c?l.cjceSetBackState(i):"messagesMutedState"===c?(s=i,j.hidden=!s,m.hidden=s):"messagesUpdateTitle"===c&&i&&(r.conversation=i,"conversation"===t&&l.cjceSetPageLabel(i))}});e.appendChild(b);var u=l.cjceDrawerEl;l.querySelector("cjmd-navigator").style.transform="translateX(8px)";var v=cjce.createElement("bm-navlist",{isSelector:!0,selectedId:t,items:o,onChange:function(e){if("chat"===e||"meet"===e||"hangouts"===e)return c.pageManager.navigate(e),void(v.cjceSelectedId=t);b.cjceSendFrameCommand({method:"messagesActivateMenuItem",value:e},n),"archived"===e&&(e="conversations",v.cjceSelectedId=e),h(t=e)},onNewTab:function(e,n){var a=n.newTabUrl||cjgShortcuts.getUrl(n.shortcutId,c.account);c.openTab(a)}});u.appendChild(v)});