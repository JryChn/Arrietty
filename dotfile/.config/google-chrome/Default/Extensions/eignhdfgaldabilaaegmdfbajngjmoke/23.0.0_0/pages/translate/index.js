"use strict";cjce.registerTemplate("bm-p-translate",function(c,i){var r,o,s,e,l="undefined"!=typeof chrome&&chrome.runtime?chrome:"undefined"!=typeof browser&&browser,a=!cjBasics.wrif.supported,n="home",m="https://translate.google.com",t=m+"/",d=m+"/community",u=null;"0"!==i.account.authuser&&(e="?authuser="+(u=i.account.authuser),t+=e,d+=e);var b={home:{iconName:"__mdi:home",label:cjBasics.lang.i18n("cj_i18n_00291","Home"),newTabUrl:"view=home"},history:{iconName:"__mdi:history",label:cjBasics.lang.i18n("cj_i18n_00155","History"),newTabUrl:"view=history"},saved:{iconName:"__mdi:star",label:cjBasics.lang.i18n("cj_i18n_01355","Saved"),newTabUrl:"view=saved",divider:!0},docupload:{iconName:"__mdi:drive_file",label:cjBasics.lang.i18n("cj_i18n_01777","Documents"),newTabUrl:"view=home&op=docs",external:!a},community:{iconName:"__mdi:people",label:cjBasics.lang.i18n("cj_i18n_01353","Community"),newTabUrl:!0,external:!a}};function h(e){i.openTab(t+"#"+e)}function p(e,a){"community"===e?i.openTab(d):h(a.newTabUrl)}if(a){var j=cjce.createElement("bm-ogb",{serviceIcon:"translate",serviceLabel:cjBasics.lang.i18n("cj_i18n_00440","Translate"),pageLabel:cjBasics.lang.i18n("cj_i18n_01167","Links"),bmApis:i,searchbox:{submitInNewTab:!0,onSubmit:function(e){h(cjBasics.urlParams.create({view:"home",op:"translate",sl:"auto",tl:"auto",text:e}))}},onNewTab:function(){p(null,b.home)}});c.appendChild(j),i.setOnPageDisplayHandler(j.cjceSearchboxEl.select);var _=cjce.createElement("cjmd-container",{scrollable:!0,shadow:"thinOnScroll"}),v=cjce.createElement("bm-navlist",{items:b,onClick:p,onNewTab:p});return _.appendChild(v),void c.appendChild(_)}function f(e){var a=b[n=e];r.cjceSetBackState("home"!==e),r.cjceSetPageLabel(a.label),s.cjceSelectedId=e}function w(e){e&&"string"==typeof e&&o.cjceSendFrameCommand({method:"translatePrefillText",value:e},m)}function g(){o.cjceSendFrameCommand({method:"translateFocus"},m)}function T(e){var a=b[e];a.external?(i.openTab(a.newTabUrl),s.cjceSelectedId=n):(f(e),o.cjceSendFrameCommand({method:"translateUpdateView",value:e},m))}!function(){r=cjce.createElement("bm-ogb",{loading:!0,drawer:!0,serviceIcon:"translate",serviceLabel:cjBasics.lang.i18n("cj_i18n_00440","Translate"),pageLabel:cjBasics.lang.i18n("cj_i18n_00291","Home"),bmApis:i,onNewTab:function(){o.cjceSendFrameRequest({method:"translateSubmitAndGetHash"},m).then(function(e){h(e)})},onBack:function(){T("home")}}),c.appendChild(r);var e=r.cjceDrawerEl;s=cjce.createElement("bm-navlist",{isSelector:!0,selectedId:"home",items:b,onChange:T,onNewTab:p}),e.appendChild(s);var a=cjBasics.uniqueId.generate(),n=cjBasics.urlParams.attach(m,{bm_cid:"translate",bm_iid:a,authuser:u,hl:cjBasics.lang.current})+"#view=home";cjBasics.webRequest.handleIframeHeaders([m+"/*bm_iid="+a+"*"],{disableOgs:m});var t=new Promise(function(a){"popup"===i.environment&&l.tabs&&l.tabs.executeScript||a(null),l.tabs.executeScript({code:"window.getSelection().toString()"},function(e){l.runtime.lastError?a(""):Array.isArray(e)?a(e[0]||""):a(e||"")})});o=cjce.createElement("bm-iframe",{solid:"#fff",src:n,shadow:!0,onMessage:function(e){var a,n,t=e.bm_method,c=e.bm_value;"translateUpdateView"===t?f(c):"translateOpenCommunity"===t?i.openTab(d):"translateOpenUrlTranslator"===t&&(a=c,n=cjBasics.urlParams.attach(m+"/translate",{u:a,authuser:u}),i.openTab(n))},onLoad:function(){r.cjceSetLoading(!1),t.then(w),i.setOnPageDisplayHandler(g)}}),c.appendChild(o)}()});