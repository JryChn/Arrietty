"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}cjce.registerTemplate("bm-p-movies",function(a,s){var c="solid";a.classList.add("bm-ele-app--yttheme");var n,i,r,o=["https://www.googleapis.com/auth/android_video"],l=window.atob("QUl6YVN5QUgwcURTVzk3M0xPeEUtRmZmbDdaNWVZVFdCQ0FXT20w"),u="#f5221b",m="home",e="https://play.google.com",d=e+"/store/",p=d+"movies",t=p+"?authuser="+s.account.authuser,h=e+"/movies?authuser="+s.account.authuser,b={home:{label:cjBasics.lang.i18n("cj_i18n_00291","Home"),iconName:"__mdi:home",newTabUrl:t},library:{label:cjBasics.lang.i18n("cj_i18n_00131","Library"),iconName:"__mdi:library_movies",divider:!0,newTabUrl:h},play:{label:cjBasics.lang.i18n("cj_i18n_00134","Shop"),iconName:"__mdi:shop",newTabUrl:t,external:!cjBasics.wrif.supported},purchases:{label:cjBasics.lang.i18n("cj_i18n_01247","YouTube purchases"),iconName:"__mdi:local_offer",external:!0,newTabUrl:cjgApis.url.youtube(s.account,"feed/purchases")},managepurchases:{label:cjBasics.lang.i18n("cj_i18n_01248","Manage purchases"),iconName:"__mdi:account_balance_wallet",external:!0,newTabUrl:cjgApis.url.youtube(s.account,"purchases")}};function _(e){var t;e&&"not_authorized"===e.cjg_error&&(a.textContent="",t=cjce.createElement("bm-fulldialog",{theme:c,lockup:{label:cjBasics.lang.i18n("cj_i18n_01205","Movies")},iconName:"youtube_movies",message:cjBasics.lang.i18n("cj_i18n_01249","Before you can use this page, you need to give access to your movies"),actionLabel:cjBasics.lang.i18n("cj_i18n_01916","Continue with Google"),actionG:!0,action:function(){cjgApis.auth.requestPermissions(s.account,e.cjg_missing_scopes)}}),a.appendChild(t))}function g(e){return e&&"object"===_typeof(e)&&Array.isArray(e.resource)?e.resource.map(function(e){var t,a,n,c=e.metadata;return{title:c.title,year:(a=c.release_date_timestamp_sec,n=parseInt(a+"000",10),new Date(n).getUTCFullYear()),thumbnail:function(e){for(var t=196*window.devicePixelRatio,a=1;a<e.length;a++)if(e[a].width<t)return e[a-1].url;return e[0].url}(c.images),duration:(t=c.duration_sec,Math.round(t/60)),id:e.resource_id.id}}):[]}function j(e,t){var a=t||{};a.alt="json",a.prettyPrint="false";var n=cjBasics.urlParams.attach("https://content.googleapis.com/android_video/v1/"+e,a);return cjgApis.request(n,{fetchAs:"json"},{pa:!0,key:l,account:s.account,requiredScopes:o}).catch(_)}function y(){return j("recommendation",{cat:"type=movie",cr:"NL",if:"imobrg",lr:"en_US",max:"9"})}function f(e){return j("asset/list",{cr:"NL",fs:"peg",id:"yt:movie:"+e.join(",yt:movie:"),if:"imobrg",lr:"en_US"})}function v(){return j("userlibrary",{max:"20"}).then(function(e){return e&&"object"===_typeof(e)&&Array.isArray(e.resource)?e.resource.map(function(e){return e.resource_id.id}):[]}).then(f)}function w(e){if(0===e.length)return cjce.createElement("cjmd-emptystate",{theme:c,color:u,iconName:"__mdi:play_movies",label:cjBasics.lang.i18n("cj_i18n_00156","No results")});for(var t=cjce.createElement("cjmd-grid"),a=0;a<e.length;a++){var n=function(t){var e=cjce.createElement("cjmd-griditem",{onClick:function(){var e=cjBasics.urlParams.attach(p+"/details",{id:t.id,authuser:s.account.authuser});s.openTab(e)}}),a=document.createElement("div");a.className="bm-p-movies-thumbnail",a.style.backgroundImage='url("'+t.thumbnail+'")',e.appendChild(a);var n=document.createElement("div");n.className="cjmd-grid__item__bottom",e.appendChild(n);var c=document.createElement("div");c.className="cjmd-grid__item__textcontainer",n.appendChild(c);var i=document.createElement("div");i.textContent=t.title||cjBasics.lang.i18n("cj_i18n_00380","Movie"),c.appendChild(i);var r,o=[];return"number"==typeof t.year&&o.push(t.year),"number"==typeof t.duration&&1<t.duration&&o.push(t.duration+" mins"),0<o.length&&((r=document.createElement("div")).className="cjmd-secondarytext",r.textContent=o.join(", "),c.appendChild(r)),20<t.title.length&&(i.title=t.title),e}(e[a]);t.appendChild(n)}return t}function C(e){if("play"===e)return s.pageManager.navigate(e,{typeId:"movies"}),void(r.cjceSelectedId=m);var t=b[m=e];n.cjceSetPageLabel(t.label),n.cjceSetLoading(!0),i.textContent="",("library"===e?v:y)().then(g).then(w).then(function(e){i.appendChild(e),n.cjceSetLoading(!1)})}n=cjce.createElement("bm-ogb",{loading:!0,theme:c,drawer:{color:u},serviceIcon:"youtube_movies",serviceLabel:cjBasics.lang.i18n("cj_i18n_01205","Movies"),pageLabel:cjBasics.lang.i18n("cj_i18n_00291","Home"),searchbox:{color:u,submitInNewTab:!0,onSubmit:function(e){var t=cjBasics.urlParams.attach(d+"search",{c:"movies",authuser:s.account.authuser,hl:cjBasics.lang.current,q:e});s.openTab(t)}},bmApis:s,onNewTab:function(){var e="library"===m?h:t;s.openTab(e)}}),a.appendChild(n),r=cjce.createElement("bm-navlist",{theme:c,isSelector:!0,selectedId:m,items:b,onChange:C,onNewTab:function(e,t){s.openTab(t.newTabUrl)}}),n.cjceDrawerEl.appendChild(r),i=cjce.createElement("cjmd-container",{scrollable:!0,shadow:"thinOnScroll"}),a.appendChild(i),s.setOnPageDisplayHandler(n.cjceSearchboxEl.select),C(m)});