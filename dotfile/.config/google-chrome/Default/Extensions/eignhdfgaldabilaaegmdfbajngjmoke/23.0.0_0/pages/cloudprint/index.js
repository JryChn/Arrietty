"use strict";cjce.registerTemplate("bm-p-cloudprint",function(e,s){var a,n,i,c,t="jobs",r="",d="https://www.google.com/cloudprint",l=s.account.authuser,m=d;"0"!==l&&(m+="?authuser="+l);var o={jobs:{label:cjBasics.lang.i18n("cj_i18n_00052","Print Jobs"),iconName:"__mdi:insert_drive_file",newTabUrl:m+"#jobs"},printers:{label:cjBasics.lang.i18n("cj_i18n_00053","Printers"),iconName:"__mdi:print",newTabUrl:m+"#printers",divider:!0},addCloud:{label:cjBasics.lang.i18n("cj_i18n_01287","Add a Cloud-Ready Printer"),iconName:"__mdi:add_circle_outline",newTabUrl:"https://www.google.com/cloudprint/learn/printers/",external:!0},addClassic:{label:cjBasics.lang.i18n("cj_i18n_01288","Add a Classic Printer"),iconName:"__mdi:add_circle_outline",newTabUrl:"https://support.google.com/cloudprint?p=mgmt_classic"+("0"!==l?"&authuser="+l:""),external:!0}},p={"application/pdf":{name:"__mdi:drive_pdf",color:"#ea4335"},"text/plain":{name:"__mdi:drive_text",color:"#1a73e8"}};function j(e,n){(n=n||{}).authuser=l;var c=cjBasics.urlParams.attach(d+"/"+e,n);return cjBasics.ajax(c,{fetchAs:"json",headers:{"X-CloudPrint-Proxy":"Google-JS"}})}function u(n){var e=cjce.createElement("cjmd-item");e.addEventListener("click",function(){var e;e=n.id,s.openTab(m+"#jobs/"+e)});var c,a=(c=n.contentType,p[c]||{name:"__mdi:drive_file",color:"#1a73e8"});a.withShell=!0;var t=cjce.createElement("cjmd-icon",a);e.appendChild(t);var i=document.createElement("div");i.className="cjmd-item__body";var r=document.createElement("div");r.className="cjmd-item__header",r.textContent=n.title,i.appendChild(r);var d=document.createElement("div");d.className="cjmd-secondarytext";var l=cjBasics.datetime.printDateString(parseInt(n.createTime,10)),o=document.createTextNode(cjBasics.lang.i18n("cj_i18n_00011","created")+": "+l+" - "+cjBasics.lang.i18n("cj_i18n_00012","status")+": "+n.status);return d.appendChild(o),i.appendChild(d),e.appendChild(i),e}function _(){var t=cjce.createElement("cjmd-container",{scrollable:!0,shadow:"thinOnScroll"});a.appendChild(t),j("search").then(function(e){var n,c,a=e.printers;0===a.length?(n=cjce.createElement("cjmd-emptystate",{label:cjBasics.lang.i18n("cj_i18n_00372","No printers found"),iconName:"__mdi:print"}),t.appendChild(n)):(c=cjce.createElement("cjmd-list"),a.forEach(function(e){var n=function(e){var n=cjce.createElement("cjmd-item");n.addEventListener("click",function(){s.openTab(m+"#printers/"+e.id)});var c=cjce.createElement("cjmd-icon",{serviceName:{ANDROID_CHROME_SNAPSHOT:"chrome",DRIVE:"drive"}[e.type]||"cloudprint"});n.appendChild(c);var a=document.createElement("div");a.className="cjmd-item__body";var t=document.createElement("div");t.className="cjmd-item__header",t.textContent=e.displayName,a.appendChild(t);var i,r,d,l=[];return e.ownerId===s.account.displayEmail&&l.push(cjBasics.lang.i18n("cj_i18n_00013","owned by me")),"UNKNOWN"!==e.connectionStatus&&l.push(e.connectionStatus),0===l.length&&((i=document.createElement("div")).className="cjmd-secondarytext",r=l.join(" - "),d=document.createTextNode(r),i.appendChild(d),a.appendChild(i)),n.appendChild(a),n}(e);c.appendChild(n)}),t.appendChild(c)),i.cjceSetLoading(!1)})}function h(e,n){var c,t;a.textContent="","printers"===e?_():(c=n,t=cjce.createElement("cjmd-container",{scrollable:!0,shadow:"thinOnScroll"}),a.appendChild(t),j("jobs",{q:c}).then(function(e){t.textContent="";var n,c,a=e.jobs;0===a.length?(n=cjce.createElement("cjmd-emptystate",{label:cjBasics.lang.i18n("cj_i18n_00374","No print jobs found"),iconName:"__mdi:insert_drive_file"}),t.appendChild(n)):(c=cjce.createElement("cjmd-list"),a.forEach(function(e){var n=u(e);c.appendChild(n)}),t.appendChild(c)),i.cjceSetLoading(!1)}))}function b(e,n){t===e&&r===n||(i.cjceSetLoading(!0),t=e,c.cjceSelectedId=e,i.cjceSetPageLabel(o[e].label),h(e,n))}function v(e){b("jobs",e)}function C(e){var n=m+"#jobs?q="+encodeURIComponent(e);s.openTab(n)}i=cjce.createElement("bm-ogb",{loading:!0,drawer:!0,serviceIcon:"cloudprint",serviceLabel:cjBasics.lang.i18n("cj_i18n_00332","Cloud Print"),pageLabel:cjBasics.lang.i18n("cj_i18n_00052","Print Jobs"),searchbox:{onClear:v,onSubmit:v,onMetaSubmit:C},bmApis:s,onNewTab:function(){var e=m+"#"+t;"jobs"===t&&r&&(e+="?q="+encodeURIComponent(r)),s.openTab(e)}}),e.appendChild(i),n=i.cjceSearchboxEl,s.setOnPageDisplayHandler(n.select),c=cjce.createElement("bm-navlist",{isSelector:!0,selectedId:t,items:o,onChange:b,onNewTab:function(e,n){s.openTab(n.newTabUrl)}}),i.cjceDrawerEl.appendChild(c),a=cjce.createElement("cjmd-container"),e.appendChild(a),h(t)});