"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){var e,t,r,n,i,o,a,u;window.top===window||"https://www.google.com"===(e=window.location).origin&&(t="undefined"!=typeof chrome&&chrome.runtime?chrome:"undefined"!=typeof browser&&browser,r=t.runtime.getURL("PATH/").replace("/PATH/",""),("object"!==_typeof(n=window.location.ancestorOrigins)||1===n.length&&n[0]===r)&&(i=r.startsWith("moz-extension://"),o=t.i18n.getMessage("@@extension_id"),e.pathname.startsWith("/cjg-proxy/"+o)&&(u=null,a=function(r,e){var i=e||{},a=i.fetchAs||"text";return new Promise(function(n,o){var s=new window.XMLHttpRequest,e=i.method||"GET",t="GET"===e;return t&&(e="POST"),s.open(e,r),t&&s.setRequestHeader("X-HTTP-Method-Override","GET"),s.addEventListener("load",function(){if(200<=s.status&&s.status<300){var e;if("json"===a)try{n(JSON.parse(s.responseText))}catch(e){o(e)}else"xml"===a||"html"===a?(u=u||new window.DOMParser,e="xml"===a?"text/xml":"text/html",n(u.parseFromString(s.responseText,e))):n(s.responseText)}else{var t={status:s.status,body:s.responseText};o(t)}}),s.addEventListener("error",function(){var e={status:s.status,body:s.responseText};o(e)}),i.credentials&&"include"===i.credentials&&(s.withCredentials=!0),i.headers&&Object.keys(i.headers).forEach(function(e){var t=i.headers[e];null!=t&&s.setRequestHeader(e,t)}),"json"===a&&s.overrideMimeType("application/json"),s.send(i.body),s})},window.addEventListener("message",function(e){var t,n,o,s;e.origin===r&&(e.isTrusted||i)&&(n=(t=e.data||{}).bm_method,o=JSON.parse(window.atob(t.bm_value)),s=t.bm_request,"cjgOriginRequest"===n&&a(o.url,o.parameters).then(function(e){window.parent.postMessage({bm_method:"cjgOriginRequest",bm_value:{success:!0,response:e},bm_request:s},r)},function(e){window.parent.postMessage({bm_method:"cjgOriginRequest",bm_value:{success:!1,response:e},bm_request:s},r)}))}))))}();