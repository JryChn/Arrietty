"use strict";function bmSetContextMenus(){var i,t,a,n="undefined"!=typeof chrome&&chrome.runtime?chrome:"undefined"!=typeof browser&&browser;function o(t,e){n.windows.create({url:cjBasics.urlParams.attach("https://www.google.com/bookmarks/mark",{op:"edit",output:"popup",title:e,bkmk:t}),width:600,height:500,type:"panel"})}function c(t){var e=t||{};e.view="cm",e.tf="0",n.windows.create({url:cjBasics.urlParams.attach("https://mail.google.com/mail",e),width:500,height:516,type:"panel"})}function s(t,e){i.create({contexts:e.contexts||[e.context||"page"],id:t,title:e.title})}function e(t,e){a[t.menuItemId].onClick(t,e),l()}function l(){i.onClicked.hasListener(e)||i.onClicked.hasListeners&&i.onClicked.hasListeners()||i.onClicked.addListener(e)}!n||(i=n.contextMenus||n.menus)&&(t=cjBasics.ajax("pages.json",{fetchAs:"json"}).then(function(t){return Object.keys(t)}),a={openInTab:{limitToPages:["extensionsettings"],context:"browser_action",title:cjBasics.lang.i18n("cj_i18n_01545","Open in a new tab"),onClick:function(){n.tabs.create({url:"app.html"})}},openInPanel:{limitToPages:["extensionsettings"],context:"browser_action",title:cjBasics.lang.i18n("cj_i18n_01546","Open in a panel"),onClick:function(){setTimeout(function(){n.windows.create({url:"app.html",width:600,height:596,type:"panel",focused:!0})})}},translateSelection:{limitToPages:["translate"],context:"selection",title:cjBasics.lang.i18n("cj_i18n_01547","Translate text"),onClick:function(t){n.windows.create({url:"https://translate.google.com/#"+cjBasics.urlParams.create({view:"home",op:"translate",sl:"auto",tl:navigator.language.split("-")[0].split("_")[0],text:t.selectionText}),width:500,height:516,type:"panel"})}},emailSelection:{limitToPages:["gmail","inbox"],context:"selection",title:cjBasics.lang.i18n("cj_i18n_01548","Mail this text"),onClick:function(t){c({body:t.selectionText+"\n\nSource: "+t.pageUrl})}},emailToSelection:{limitToPages:["gmail","inbox"],context:"selection",title:cjBasics.lang.i18n("cj_i18n_01549","Write mail to address"),onClick:function(t){c({to:t.selectionText})}},bookmarkThisPage:{limitToPages:["bookmarks"],context:"page",title:cjBasics.lang.i18n("cj_i18n_01550","Bookmark this page"),onClick:function(t,e){o(t.pageUrl,e.title)}},bookmarkThisLink:{limitToPages:["bookmarks"],context:"link",title:cjBasics.lang.i18n("cj_i18n_01551","Bookmark this link"),onClick:function(t){o(t.linkUrl)}},gmailThisPage:{limitToPages:["gmail","inbox"],context:"page",title:cjBasics.lang.i18n("cj_i18n_01552","Mail this page"),onClick:function(t,e){c({su:e.title,body:t.pageUrl})}}},i.removeAll(function(){t.then(function(o){Object.keys(a).forEach(function(t){var e=a[t],i=e.limitToPages;if(Array.isArray(i)){for(var n=0;n<i.length;n++)if(-1!==o.indexOf(i[n]))return void s(t,e)}else s(t,e)}),l()})}))}