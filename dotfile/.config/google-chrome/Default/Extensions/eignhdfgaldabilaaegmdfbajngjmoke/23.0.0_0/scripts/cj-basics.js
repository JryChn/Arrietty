"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var cjBasics=function(){var e,n,t,r,l="undefined"!=typeof chrome&&chrome.runtime?chrome:"undefined"!=typeof browser&&browser,o=l.runtime.getURL("PATH/").replace("/PATH/",""),a=o+window.location.pathname,i=navigator.userAgent,s=-1!==navigator.platform.toLowerCase().indexOf("mac"),c=/\bCrOS\b/.test(i),u=/Edge?\/\d+/.test(i),d=-1!==i.indexOf("OPR"),f=-1!==i.indexOf("Whale"),m=-1!==i.indexOf("Vivaldi"),p=-1!==i.indexOf("Chrome"),h=o.startsWith("moz-extension://"),v=/mobile/i.test(i),b=h&&v,g={hex2dec:function(e){function r(e,n){var t=0,r=[];for(e=e.split("").map(Number),n=n.split("").map(Number);e.length||n.length;){var i=(e.pop()||0)+(n.pop()||0)+t;r.unshift(i<10?i:i-10),t=i<10?0:1}return t&&r.unshift(t),r.join("")}var i="0";return e.split("").forEach(function(e){for(var n=parseInt(e,16),t=8;t;t>>=1)i=r(i,i),n&t&&(i=r(i,"1"))}),i},dec2hex:function(e){for(var n=e.toString().split(""),t=[],r=[];n.length;)for(var i=+n.shift(),o=0;i||o<t.length;o++)i+=10*(t[o]||0),t[o]=i%16,i=(i-t[o])/16;for(;t.length;)r.push(t.pop().toString(16));return r.join("")}},_={mac:s,chromeOS:c,chromeLike:!h&&!d,firefox:h,firefoxMobile:b,opera:d,preferNativeScrollbar:!1,mobileUserAgent:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.149 Mobile Safari/537.36",getActionableUrl:function(){return e=e||new Promise(function(t){l.tabs&&l.tabs.query||t(null),l.tabs.query({currentWindow:!0,active:!0},function(e){var n=e[0]&&e[0].url;n&&n!==window.location.href&&(n.startsWith("https://")||n.startsWith("http://"))?t({url:n,title:e[0].title}):t(null)})})},getEnvironment:function(){return b?"Firefox Mobile":h?"Firefox":c?"Chrome OS":m?"Vivaldi":u?"Edge":d?"Opera":f?"Whale":"Chrome"}},y=(t=m||!h&&!d&&!c&&!u&&!f&&p,r=l.webRequest&&!m,{restoreSupported:function(){return n=n||w()},possibleIssue:t,supported:r});function w(){if(!r||!t)return Promise.resolve();var n="bm_pref__webrequestcheck__wrifissue";return browserStorage.local.getItem(n).then(function(e){r=!0!==e,cjBasics.wrif.supported=r,setTimeout(function(){new Promise(function(n){if(h)return n(!1);var e="https://pay.google.com/webrequestcheck_"+cjBasics.uniqueId.generate()+"?bm_cid=webrequestcheck";function t(e){n(e),i.remove(),r.removeListener()}var r=cjBasics.webRequest.addListener("onBeforeRequest",function(){return t(!1),{cancel:!0}},{types:["sub_frame"],urls:[e]},["blocking"]),i=cjce.createElement("basic-iframe",{hidden:!0,src:e,sandbox:"allow-same-origin allow-scripts",onMessage:function(e){"webrequestcheck"===e.bm_method&&t(!0)}});document.body.appendChild(i)}).then(function(e){e===r&&browserStorage.local.setItem(n,e).then(function(){window.location.reload()})})},100)})}var j={create:x,attach:function(e,n,t){var r=x(n).toString(),i=e;return r&&(i+="?"+r),t&&(console.debug("Hash has been removed"),i+="#"+t),i}};function x(t){var r=new URLSearchParams;return Object.keys(t).forEach(function(n){var e=t[n];null!=e&&(Array.isArray(t[n])?t[n].forEach(function(e){r.append(n,e)}):r.append(n,e))}),r}var L,S,E,C,q,M,O,k,A,T,H,R,D,P,W=(L=null,function(e,n){var o=n||{},a=o.fetchAs||"text";return new Promise(function(t,r){var i=new window.XMLHttpRequest;return i.open(o.method||"GET",e),i.addEventListener("load",function(){if(200<=i.status&&i.status<300){var e;if("json"===a)try{t(JSON.parse(i.responseText))}catch(e){r(e)}else"xml"===a||"html"===a?(L=L||new window.DOMParser,e="xml"===a?"text/xml":"text/html",t(L.parseFromString(i.responseText,e))):t(i.responseText)}else{var n={status:i.status,body:i.responseText};r(n)}}),i.addEventListener("error",function(){var e={status:i.status,body:i.responseText};r(e)}),o.credentials&&"include"===o.credentials&&(i.withCredentials=!0),o.headers&&Object.keys(o.headers).forEach(function(e){var n=o.headers[e];null!=n&&i.setRequestHeader(e,n)}),"json"===a&&i.overrideMimeType("application/json"),i.send(o.body),i})}),F=(S={},E={},{loadScript:function(r){var e;return E[r]||((e=document.createElement("link")).as="script",e.rel="preload",e.href=r,document.head.appendChild(e),E[r]=new Promise(function(e,n){var t=document.createElement("script");t.src=r,t.async=!0,t.addEventListener("load",e),t.addEventListener("error",n),document.head.appendChild(t)})),E[r]},loadStyle:function(o){var e;return S[o]||((e=document.createElement("link")).as="style",e.rel="preload",e.href=o,document.head.appendChild(e),S[o]=new Promise(function(e,n){var t=document.createElement("link");function r(){t.removeEventListener("error",i),e()}function i(){t.removeEventListener("load",r),n(new Error("Loading failed"))}t.rel="stylesheet",t.href=o,t.addEventListener("load",r,{once:!0}),t.addEventListener("error",i,{once:!0}),document.head.appendChild(t)})),S[o]}}),I={generate:function(){return(Date.now()+Math.random()).toString(36).replace(".","_")}},B=function(){var s=-1,e=!1,n=l.webRequest&&l.webRequest.OnBeforeSendHeadersOptions;for(var t in n)"extraHeaders"===n[t]&&(e=!0);var r=new Promise(function(n){if(!l||!l.tabs||!l.tabs.getCurrent)return n(s);setTimeout(n,2e3),l.tabs.getCurrent(function(e){"object"===_typeof(e)&&"number"==typeof e.id&&(s=e.id),n(s)})});function c(e,n,t,r){if(!l.webRequest)return{removeListener:function(){}};function i(e){if(!e.documentUrl||e.documentUrl.split("?")[0].split("#")[0]===a)return n(e)}return-1!==(t=t||{}).tabId&&(t.tabId=s),l.webRequest[e].addListener(i,t,r),{removeListener:function(){setTimeout(function(){l.webRequest[e].removeListener(i)},100)}}}function u(e,n,t){var r=c("onBeforeRequest",function(e){return n&&n(e.url),t&&r.removeListener(),{cancel:!0}},{types:["sub_frame"],urls:e},["blocking"]);return r}function d(e,r,n,t){c("onHeadersReceived",function(e){return{responseHeaders:e.responseHeaders.filter(function(e){var n,i,t=e.name.toLowerCase();return"content-security-policy"===t&&(e.value=(n=e.value,i=r,(n||"").split(/,+ ?/).map(function(e){var r=["frame-ancestors "+o];return e.split(/;+ ?/).forEach(function(e){var n=e.split(/ +/),t=n.shift();if("report-uri"!==t&&"report-to"!==t&&"frame-ancestors"!==t)return!i.handleFirefoxInject||"script-src"!==t&&"script-src-elem"!==t?void r.push(e):(-1===n.indexOf("'report-sample'")&&n.push("'report-sample'"),-1===n.indexOf("'strict-dynamic'")&&n.push("'strict-dynamic'"),void r.push(t+" "+n.join(" ")))}),r.join("; ")}).join(", "))),"x-frame-options"===t&&(e.value="allow-from "+o),"report-to"!==t&&"x-frame-options"!==t&&"content-security-policy-report-only"!==t})}},{tabId:n,types:t,urls:e},["blocking","responseHeaders"])}return{addListener:c,catchAndStop:u,getTabId:function(){return r},handleIframeHeaders:function(e,n){var t,r,i=n||{},o={handleFirefoxInject:h&&i.handleFirefoxInject,includeGmailFrameAncestor:i.includeGmailFrameAncestor&&cjBasics.wrif.supported},a=e.filter(function(e){return new URL(e).origin.endsWith(".google.com")});d(a,o,s,["sub_frame"]),i.handleSwCache&&d(a,o,-1,["xmlhttprequest"]),i.useMobileUserAgent&&(t=a,r=cjBasics.navigator.mobileUserAgent,c("onBeforeSendHeaders",function(e){for(var n=e.requestHeaders,t=0;t<n.length;t++){"user-agent"===n[t].name.toLowerCase()&&(n[t].value=r)}return{requestHeaders:n}},{urls:t,types:["sub_frame"]},["blocking","requestHeaders"])),i.disableOgs&&i.disableOgs.endsWith(".google.com")&&u(["https://ogs.google.com/*idget/app*"+encodeURIComponent(i.disableOgs)+"*usegapi=1*"])},extraHeadersSupported:e}}(),U=function(){var t=navigator.language,e=l.i18n.getMessage("@@ui_locale");e&&(-1!==e.indexOf("_")?t=e.replace("_","-"):t.split("-")[0]!==e&&(t=e)),"und"===t&&(t=null);var n,r,i=!1;function o(e,n){return e&&l.i18n.getMessage(e)||n||""}function a(e,n){return n||(e&&l.i18n.getMessage(e)||"")}function s(e,n){return e&&r&&r[e]&&r[e].message||o(e,n)}t&&(i="en"===(n=t.split("-")[0].split("_")[0])||"zh"===n);var c={current:t,i18n:o,shortLang:i,overwriteLanguage:function(n){if("en"===n||"eo"===n)return"en"===n?(c.i18n=a,t=n,void(c.current=t)):cjBasics.ajax("/_locales/"+n+"/messages.json",{fetchAs:"json"}).then(function(e){e&&(c.i18n=s,t=n,c.current=t,r=e)})}};return c}(),K=(C=function(){},window.clipboardData&&window.clipboardData.setData?C=function(e){window.clipboardData.setData("Text",e)}:document.queryCommandSupported&&document.queryCommandSupported("copy")&&(C=function(e){var n=document.createElement("textarea");n.textContent=e,n.setAttribute("style","position: fixed !important; opacity: 0.01 !important;"),document.body.appendChild(n),n.select();try{document.execCommand("copy")}catch(e){}document.body.removeChild(n)}),{copy:C}),N=(q=new Date,M=q.getFullYear(),O=q.getMonth(),k=q.getDate(),A=[U.i18n("cj_i18n_06255","Jan"),U.i18n("cj_i18n_06256","Feb"),U.i18n("cj_i18n_06257","Mar"),U.i18n("cj_i18n_06258","Apr"),U.i18n("cj_i18n_06259","May"),U.i18n("cj_i18n_06260","Jun"),U.i18n("cj_i18n_06261","Jul"),U.i18n("cj_i18n_06262","Aug"),U.i18n("cj_i18n_06263","Sep"),U.i18n("cj_i18n_06264","Oct"),U.i18n("cj_i18n_06265","Nov"),U.i18n("cj_i18n_06266","Dec")],T=[U.i18n("cj_i18n_00165","January"),U.i18n("cj_i18n_00166","February"),U.i18n("cj_i18n_00167","March"),U.i18n("cj_i18n_00168","April"),U.i18n("cj_i18n_00169","May"),U.i18n("cj_i18n_00170","June"),U.i18n("cj_i18n_00171","July"),U.i18n("cj_i18n_00172","August"),U.i18n("cj_i18n_00173","September"),U.i18n("cj_i18n_00174","October"),U.i18n("cj_i18n_00175","November"),U.i18n("cj_i18n_00176","December")],H=[U.i18n("cj_i18n_06254","Sun"),U.i18n("cj_i18n_06248","Mon"),U.i18n("cj_i18n_06249","Tue"),U.i18n("cj_i18n_06250","Wed"),U.i18n("cj_i18n_06251","Thu"),U.i18n("cj_i18n_06252","Fri"),U.i18n("cj_i18n_06253","Sat")],R=U.i18n("cj_i18n_01253","Today"),D=U.i18n("cj_i18n_00226","Yesterday"),P=U.i18n("cj_i18n_06247","Tomorrow"),{printDateString:function(e,n){var t,r=n||{},i=new Date(e),o=function(e,n){var t=e.getFullYear(),r=e.getMonth(),i=e.getDate();if(t===M&&r===O){if(i===k)return R;if(k-i==1)return D;if(k-i==-1)return P}var o=A[r]+" "+i;return t&&(t!==M||n.alwaysYear)?o+", "+t:n.weekday?H[e.getDay()]+", "+o:o}(i,r);return r.time?o+(", "+J((t=i).getHours())+":"+J(t.getMinutes())):o},fullMonthNames:T,shortWeekdayNames:H});function J(e){return e?9<e?e.toString():"0"+e.toString():"00"}var G,Y=(G=s?"metaKey":"ctrlKey",{hasMeta:function(e){return e[G]||1===e.button},hasModifier:function(e){return e.altKey||e.shiftKey||e.metaKey||e.ctrlKey},defaultPrevented:function(e){return e.getPreventDefault&&e.getPreventDefault()||e.defaultPrevented},focusVisibleHandling:V});function z(){document.documentElement.classList.remove("focus-keyboard-mode"),document.addEventListener("keydown",V,!0),document.removeEventListener("mousedown",z,!0)}function V(e){e&&(e.metaKey||e.altKey||e.ctrlKey)||(document.documentElement.classList.add("focus-keyboard-mode"),document.addEventListener("mousedown",z,!0),document.removeEventListener("keydown",V,!0))}return{ajax:W,navigator:_,urlParams:j,resources:F,datetime:N,uniqueId:I,numbers:g,webRequest:B,lang:U,clipboard:K,cleanBmUrl:function(e){var n=new URL(e),t=n.origin+n.pathname,r=n.search.replace("?","").split("&").filter(function(e){return!e.startsWith("bm_")&&!e.startsWith("hl=")&&!e.startsWith("forcehl=")}).join("&");2<r.length&&(t+="?"+r);var i=n.hash;return i.startsWith("#")&&(i=i.replace("#","")),1<i.length&&(t+="#"+i),t.endsWith("?undefined")&&(t=t.replace("?undefined","")),t},wrif:y,htmlToFragment:function(e){for(var n,t=document.createDocumentFragment(),r=e.replace(/<i>|<\/i>/g,"").split(/<b>|<\/b>/g),i=0;i<r.length;i++){i%2?((n=document.createElement("b")).textContent=r[i],t.appendChild(n)):t.appendChild(document.createTextNode(r[i]))}return t},events:Y}}();